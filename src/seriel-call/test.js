move
undefined
import {H, P, S} from './config.js'; import {call, callParalel} from "./call.js";import http from 'http'; import url from 'url'; export const server = http.createServer(async (req, res)=>{ let R = []; let u = url.parse(req.url); if(u.query){ R.push(u.query.match(/[^&]+/g).reduce((p, c)=>{ let v = c.split("="); p[v[0]] = v[1]; return p; }, {})); } switch (u.pathname){case "/pokemon": R.push(await call(S,{domain:"PokeAPI",endpoint:"Pokemon",argv:[{key:"pokemon",value:["0","pokemon"]}],filter:"{name=>name moves:[between 0..4:{move:{name[=]moves }}]types:[all:{type:{name[=]types }}]}"}));R.push(await callParalel(S,R[1][moves].reduce((p0, c0) => (p0.concat({domain:"PokeAPI",endpoint:undefined,argv:[{key:"move",value:c0}],filter:"{name=>0 power=>1 }"})), [])));res.setHeader("Content-Type", "application/json"); res.statusCode = 200; res.write(JSON.stringify(R)); res.send; res.end(); break;} });server.listen(P,H,()=>{ console.log(`Server is running on ${H}:${P}`); });
